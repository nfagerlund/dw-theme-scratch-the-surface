## Info

layerinfo "type" = "theme";
layerinfo "name" = "Scratch the Surface";
layerinfo author_name = "roadrunnertwice";
layerinfo lang = "en";

set layout_authors = [{"name" => "roadrunnertwice", "type" => "user"}];

## Layout Defaults

set layout_type = "two-columns-left";
set userpics_position = "left";
set tags_page_type = "list";
    # or cloud, or multi; try these later?
set text_skiplinks_back = "# older posts";
set text_skiplinks_forward = "# newer posts";


### module defaults overrides, in the order that they're listed in core2

set module_calendar_show = false;
set module_links_show = false;
set module_syndicate_order = 7;
set module_tags_show = false;
set module_tags_order = 16;
set module_pagesummary_show = false;
set module_pagesummary_order = 22;
set module_time_show = false;
set module_poweredby_show = false;
set module_customtext_show = true;
set module_customtext_order = 5;
set module_credit_section = "two";
set module_search_order = 4;
set module_cuttagcontrols_order = 6;


## Font Stuff

set font_base = """"Avenir Next", Candara, Helvetica, Arial""";
set font_fallback = "sans-serif";
set font_base_size = "1";
set font_base_units = "em";

# set font_journal_title = """Charter, Cochin, Constantia""";
set font_journal_title_size = "2.2";
set font_journal_title_units = "em";

# set font_journal_subtitle = """Charter, Cochin, Constantia""";
set font_journal_subtitle_size = "1.3";
set font_journal_subtitle_units = "em";

# set font_entry_title = """Charter, Cochin, Constantia""";
set font_entry_title_size = "1.37";
set font_entry_title_units = "em";

set font_comment_title_size = "1.2";
set font_comment_title_units = "em";

# set font_module_heading = """Charter, Cochin, Constantia""";
set font_module_heading_size = "1.37";
set font_module_heading_units = "em";

## Colors

### Page

set color_page_background = "#ffdbb4";
set color_page_text = "#3f3f3f";
set color_footer_background = "#fc915c";
set color_header_background = "#fc915c";

set color_page_title = "#3f3f3f";

set color_page_link = "#265c92";
# set color_page_link_active = "#111185";
# set color_page_link_hover = "#162ac2";
set color_page_link_hover = "#5452FF";
# set color_page_link_visited = "#618dbb";
set color_page_link_visited = "#111185";

### Control strip

set custom_control_strip_colors = "on_no_gradient";
set control_strip_bgcolor = "#626d8b";
set control_strip_fgcolor = "#fff";
set control_strip_bordercolor = "#626d8b";
set control_strip_linkcolor = "#fc7f3f";

### Entries

set color_entry_background = "#fff";
set color_entry_text = "#3f3f3f";

# green versions:

# set color_entry_border = "#3b7819";
# set color_entry_link = "#3b7819";
# set color_entry_link_active = "#888746";
# set color_entry_link_hover = "#365b1e";
# set color_entry_link_visited = "#7a9241";
# set color_entry_title = "#3b7819";
# set color_entry_title_background = "#d7e6cf";

# orange versions:

set color_entry_border = "#fc7f3f";
# set color_entry_link = "#fc7f3f";
# set color_entry_link_active = "#b3592d";
# set color_entry_link_hover = "#fc5603";
# set color_entry_link_visited = "#d66424";
set color_entry_title = "#ec5d25";
set color_entry_title_background = "#ffdfbf";

### Modules

set color_module_background = "#fff";
set color_module_text = "#3f3f3f";

# orange version

# set color_module_border = "#fc7f3f";
# set color_module_link = "#fc7f3f";
# set color_module_link_active = "#b3592d";
# set color_module_link_hover = "#fc5603";
# set color_module_link_visited = "#fca87e";
# set color_module_title = "#fc7f3f";
# set color_module_title_background = "#ffdfbf";

# green version:

set color_module_border = "#3b7819";
# set color_module_link = "#3b7819";
# set color_module_link_active = "#888746";
# set color_module_link_hover = "#365b1e";
# set color_module_link_visited = "#7a9241";
set color_module_title = "#3b7819";
set color_module_title_background = "#d7e6cf";


### Color props from Transmogrified, that won't work here:

# set color_page_title_background = "#626d8b";


## Add helpful nav to the header

function Page::print_header()
{
    # The bit from core2:
    $this->print_global_title();
    $this->print_global_subtitle();
    $this->print_title();

    # The bit from me:
    # Optional list of emoji to jump places goes here, use CSS to hide on non-mobile
    var string module_jump_id;
    if ($*layout_type == "one-column-split") {
        $module_jump_id = "#tertiary";
    } else {
        $module_jump_id = "#secondary";
    }
"""
<ul id="scratch-micro-nav">
<li><a href="$this.view_url{"recent"}" title="recent">ğŸ“œ</a></li>
<li><a href="$this.view_url{"read"}" title="read">ğŸ‘¯â€â™€ï¸</a></li>
<li><a href="$this.view_url{"network"}" title="network">ğŸŒ</a></li>
<li><a href="$this.view_url{"userinfo"}" title="userinfo">ğŸ¤·ğŸ½â€â™€ï¸</a></li>
<li><a href="$module_jump_id" title="Jump to Links/Navs">ğŸ”œ</a></li>
</ul>
""";
}



### Stylesheet

#  bring over more inherited css, fix fucked-up multi-paragraph list items, fix list item over-indentation, make UL and OL lists look like they came from the same planet, make HRs look better, make blockquotes look better, deal with comments, deal with odd pages like archive

function print_stylesheet () {
    # ~~~~ Vars taken from Practicality:
    var string medium_media_query = generate_medium_media_query();
    var string large_media_query = generate_large_media_query();

    var string page_subtitle_font = generate_font_css($*font_journal_subtitle, $*font_base, $*font_fallback, $*font_journal_subtitle_size, $*font_journal_subtitle_units);
    var string entry_title_font = generate_font_css($*font_entry_title, $*font_base, $*font_fallback, $*font_entry_title_size, $*font_entry_title_units);

    # ~~~~ IDEK:
    var string rectangle_spacing = ".9rem";
    var string rectangle_radius = ".3rem";
    var string breathing_room_full = ".6rem";
    var string breathing_room_half = ".3rem";
    var string breathing_room_double = "1.2rem";

    # Return the actual CSS:

"""
/* ~~ Scratch the Surface =) ~~ */

/*--- Main ---*/

body {
    margin: 0;
}

a, a:link, a:visited {
    /* text-decoration: none; */
}

p {
        margin: 1em 0;
}

input, textarea {
    background: $*color_entry_background;
    border: 1px solid $*color_page_text;
    color: $*color_entry_text;
}

blockquote {
    background: $*color_page_background;
    border-bottom: 3px solid $*color_entry_border;
    color: $*color_page_text;
    margin: 1em 1em 1.5em 3em;
    padding: 10px;
    width: 85%;
}

ul {
    list-style: disc inside;
    margin: .2em 0 0 2.5em;
}

ol {
    list-style: decimal inside;
    margin: .2em 0 0 2.5em;
}

/*--- Main Containers ---*/

#canvas {
    width: 90%;
    margin: 0 auto;
}

#primary > .inner:first-child {
    padding: 0;
}

#secondary > .inner:first-child,
#tertiary > .inner:first-child {
    padding: 0;
}

@media $medium_media_query {
    .column-left #primary > .inner:first-child {
        padding-left: $rectangle_spacing;
    }

    .column-right #primary > .inner:first-child {
        padding-right: $rectangle_spacing;
    }

    .three-columns-left #secondary > .inner:first-child,
    .three-columns-right #secondary > .inner:first-child {
        padding-right: $rectangle_spacing;
    }

    .three-columns-left #tertiary > .inner:first-child,
    .three-columns-right #tertiary > .inner:first-child {
        padding-left: $rectangle_spacing;
    }
}



/* --- Micro-nav emojis: should only appear on mobile --- */

#scratch-micro-nav {
    list-style: none;
    margin: 0;
    padding: 0;
    text-align: center;
}

#scratch-micro-nav > li {
    display: inline;
    margin: 0.25em;
}

#scratch-micro-nav a {
    text-decoration: none;
}

@media $medium_media_query {
    #scratch-micro-nav {
        display: none;
    }
}

/*--- Journal Header ---*/

#header {
    padding: .1em $rectangle_spacing;
    border-radius: 0 0 $rectangle_radius $rectangle_radius;
}

h1#title, h1#title a {
    color: $*color_page_title;
    text-align: center;
}

h2#subtitle,
h2#pagetitle {
    border: none;
    color: $*color_page_title;
    font-weight: bold;
    text-align: center;
}

/*--- Journal Navigation ---*/

.navigation {
    $entry_title_font
    background: $*color_entry_background;
    color: $*color_entry_text;
    border: 1px solid $*color_entry_border;
    font-size: 1.2em;
    text-align: center;
    margin: $rectangle_spacing 0;
    padding: $breathing_room_half 0;
    border-radius: $rectangle_radius;
}

.navigation li {
    padding: 0 $breathing_room_full !important;
}

.topnav a, .bottomnav a {
    color: $*color_entry_title;
}

.navigation.empty {
    display: none;
}

.page-read .navigation.empty {
    display: block;
    padding: 10px;
}

.page-read .navigation.empty ul {
    margin: 0;
    padding: 0;
}

.page-read .navigation.empty ul li {
    margin: 0;
    padding: 0;
}


/*--- Sidebar ---*/

li.page-separator {
    display: none;
}

.module {
    /* don't need border property, rasa's got it */
    margin-top: $rectangle_spacing;
    border-radius: $rectangle_radius;
    padding: 0;
    background-color: $*color_module_title_background;
}

.module-content {
    padding: $breathing_room_full;
    background-color: $*color_module_background;
    border-bottom-left-radius: $rectangle_radius;
    border-bottom-right-radius: $rectangle_radius;
}

.module-content:first-child {
    border-top-left-radius: $rectangle_radius;
    border-top-right-radius: $rectangle_radius;
}

h2.module-header {
    border-bottom: 1px solid $*color_module_border;
    color: $*color_module_title;
    margin: 0;
    padding: $breathing_room_half $breathing_room_full;
    border-radius: $rectangle_radius $rectangle_radius 0 0;
}

h2.module-header a {
    color: $*color_module_title;
}

ul.module-list {
    list-style: none;
    margin-left: 0;
}

ul.module-list li ,
ul.module-list-item li {
    padding: 0 0 0 5px;
}

.module-content .userpic {
    text-align: center;
}

.module-content .userpic img {
    background: $*color_entry_title_background;
    border: 1px solid $*color_entry_border;
    padding: $breathing_room_half;
}

.journal-name {
    margin-top: $breathing_room_half;
    text-align: center;
}

.journal-website-name {
    text-align: center;
}

ul.userlite-interaction-links.icon-links {
    margin: $breathing_room_half 0 0;
    text-align: center;
}

ul.userlite-interaction-links.icon-links li {
    margin: 0 auto;
}

ul.userlite-interaction-links.text-links {
    padding: 0 0 0 $breathing_room_half;
    list-style: none;
}

.module-navlinks {
    color: $*color_module_title;
    list-style: none;
}

.module-navlinks li a {
  padding-top: 0 !important;
  padding-bottom: 0 !important;
}

/* TODO idek what .manage-link is */
.manage-link {
    margin: 10px 0 0;
    text-align: right;
}

.module-calendar table {
    text-align: center;
}

.module-calendar th {
    background: $*color_page_background;
    color: $*color_page_text;
    border: 1px solid $*color_entry_border;
    padding: 0;
}

.module-calendar td.empty-day {
    border: 1px solid $*color_entry_border;
}

.module-calendar td.entry-day {
    background: $*color_page_background;
    border: 1px solid $*color_entry_border;
}

.module-calendar td.entry-day a { color: $*color_page_link; }
.module-calendar td.entry-day a:visited { color: $*color_page_link_visited; }
.module-calendar td.entry-day a:hover { color: $*color_page_link_hover; }
.module-calendar td.entry-day a:active { color: $*color_page_link_active; }

/*--- Entries ---*/

.entry {
    /* don't need border property, rasa's got it */
    margin-top: $rectangle_spacing;
    border-radius: $rectangle_radius;
    padding: 0;
    background-color: $*color_entry_title_background;
}

.entry .contents {
    padding: $breathing_room_double;
    background-color: $*color_entry_background;
}

.entry .footer {
    padding: $breathing_room_full;
    background-color: $*color_entry_background;
    border-bottom-left-radius: $rectangle_radius;
    border-bottom-right-radius: $rectangle_radius;
    border-top: 1px solid $*color_entry_border;
}

.entry .header {
    border-bottom: 1px solid $*color_entry_border;
    margin: 0;
    padding: $breathing_room_half $breathing_room_full;
    border-radius: $rectangle_radius $rectangle_radius 0 0;
}

h3.entry-title {
    margin: 0;
}

h3.entry-title a {
    text-decoration: none;
}

.entry-content {
    min-height: 100px; /* don't shrink below the userpic height */
}

.entry-content th {
    background-color: $*color_entry_title_background;
}

.entry-content td {
    background-color: $*color_module_title_background;
}

.entry-content > p:first-child {
    margin: 0;
}

.has-userpic .entry .userpic {
    margin: 0 $breathing_room_double $breathing_room_full 0;
}

.entry .userpic img {
    background: $*color_module_title_background;
    border: 1px solid $*color_module_border;
    padding: $breathing_room_half;
}

.metadata {
    font-size: .85em;
    margin: 1em 0 0;
    text-align: right;
}

.metadata-item-music {
  overflow-wrap: break-word;
}


/* Make [huge huge huge] content imgs behave on desktop/tablet: don't blow out layout for wide boyz, and make portrait pix fit in a normal-ppl window. */
@media $medium_media_query {
  .entry-content img, .comment-content img {
    max-width: 100% !important;
        /* yes, I know, but Tabula Rasa sets a wack value for this in a large_media_query and I don't want to paste its whole damn Page::print_default_stylesheet and end up responsible for updates. */
    max-height: 700px;
  }
}





.has-userpic .entry .userpic,
.has-userpic .comment .userpic {
    float: $*userpics_position;
}

""";
}

